/* =======================
   MENUBAR CONTAINER
   ======================= */
   .pf-menubar-container {
    position: fixed;
    top: clamp(8px, 1.5vh, 16px);
    right: clamp(8px, 1.5vh, 16px);
    z-index: 1000;
    --pf-glass-tint: rgba(0,0,0,.28);
    font-family: "Inter", "Segoe UI", system-ui, sans-serif;
    line-height: 1.4;
    font-size: 0.78rem;
    user-select: none;
    -webkit-user-select: none;
    touch-action: none;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 12px;
    pointer-events: none; /* Let clicks pass through gaps */
  }
  .pf-menubar-container > * {
    pointer-events: auto; /* Re-enable pointer events for children */
  }
  .pf-menubar-container.hidden { display: none; }
  
  /* =======================
     WRAPPER
     ======================= */
  .pf-menubar-wrap {
    display: flex;
    flex-direction: column;
    gap: clamp(6px, 1.2cqw, 10px);
    align-items: stretch;
    transition: transform .3s ease;
  }
  .pf-menubar-wrap.hidden { display: none; }
  
  /* =======================
     SIDEBAR (scrollable)
     ======================= */
  .pf-menubar-sidebar {
    position: relative;
    touch-action: pan-y;
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    /* Width control: clamp between min 220px and max 66vw (2/3rds width) */
    width: clamp(220px, 72vw, 66vw);
    max-width: 320px; /* Optional: Keep existing max width cap? User said "max 2/3rds" but usually sidebar is narrow. Let's stick to clamp logic but cap at 66vw for small screens, or just max-width: 66vw explicitly? */
    /* Actually, the previous clamp(220px, 72vw, 320px) capped it at 320px.
       If user wants it to take up *up to* 2/3rds, that usually implies allowing it to be wider on small screens.
       Let's set max-width to 66vw to respect the constraint, and keep width flexible. */
    width: min(320px, 66vw); 
    min-width: 220px;
    
    container-type: inline-size;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,.18);
    /* Dark glass background for better contrast - Matched to routing.css */
    background: linear-gradient(135deg, rgba(20, 25, 40, 0.95), rgba(20, 25, 40, 0.85));
    padding: clamp(8px, 2cqw, 12px);
    box-shadow: 0 10px 28px rgba(0,0,0,.5);
    backdrop-filter: blur(14px);
    max-height: 85vh;
    overflow-y: auto;     /* scrolling enabled */
    overflow-x: hidden;
    scrollbar-gutter: stable both-edges;
  }
  /* Ensure direct children never exceed container width */
  .pf-menubar-sidebar > * { max-width: 100%; box-sizing: border-box; }
  .pf-menubar-sidebar::before {
    content: "";
    position: absolute;
    inset: 0;
    background: var(--pf-glass-tint);
    pointer-events: none;
    z-index: 0;
  }
  
  /* =======================
     PANEL (flexible, not squashed)
     ======================= */
  .pf-menubar-panel {
    position: relative;
    width: 100%;
    max-width: 100%;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,.15);
    /* Slightly lighter dark panel */
    background: rgba(255, 255, 255, 0.04);
    padding: clamp(8px, 2cqw, 12px);
    box-shadow: 0 4px 12px rgba(0,0,0,.25);
    overflow: visible;    /* content expands naturally */
    flex-shrink: 0;       /* don't squash in flex layout */
    box-sizing: border-box;
  }
  .pf-menubar-panel::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,.14);
    pointer-events: none;
    z-index: 0;
  }
  
  /* =======================
     LABELS
     ======================= */
  .pf-menubar-label {
    display: block;
    font-size: clamp(12px, 1.2cqw, 14px);
    font-weight: 600;
    color: #fff;
    margin-bottom: 0.35rem;
    text-shadow: 0 1px 2px rgba(0,0,0,.45);
  }
  
  /* =======================
     BUTTONS & SELECTS
     ======================= */
  .pf-menubar-select,
  .pf-menubar-button {
    width: 100%;
    max-width: 100%;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,.25);
    background: rgba(0,0,0,.25);
    color: #fff;
    padding: clamp(6px, 1.6cqw, 10px) clamp(8px, 2cqw, 12px);
    backdrop-filter: blur(8px);
    cursor: pointer;
    font-size: clamp(12px, 1.2cqw, 14px);
    min-height: clamp(30px, 4cqw, 36px);
    transition: background .2s ease, transform .15s ease, box-shadow .15s ease;
    box-sizing: border-box;
  }
  .pf-menubar-select { appearance: none; }
  
  .pf-menubar-select:hover,
  .pf-menubar-button:hover {
    background: rgba(255,255,255,.1);
    transform: translateY(-1px);
    box-shadow: 0 3px 8px rgba(0,0,0,.2);
  }
  
  .pf-menubar-button.active {
    background: linear-gradient(90deg, #ff7a18, #af002d 70%);
    box-shadow: 0 4px 10px rgba(175,0,45,.35);
    color: #fff;
  }
  
  .pf-menubar-buttons {
    display: flex;
    gap: clamp(6px, 1cqw, 10px);
    flex-wrap: wrap;
    margin-top: 0.25rem;
  }
  
  /* =======================
     RANGE SLIDERS
     ======================= */
  .pf-menubar-range-title {
    margin-bottom: 0.3rem;
    color: #fff;
    font-size: 0.75rem;
    font-weight: 600;
  }
  .pf-menubar-range-row {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    min-width: 0; /* allow children to shrink inside flex */
  }
  /* Make numeric inputs share row width evenly and respect container */
  .pf-menubar-range-row .pf-menubar-select {
    flex: 1 1 0;
    min-width: 0;
  }
  .pf-menubar-range-min,
  .pf-menubar-range-max {
    width: 2.5rem;
    text-align: center;
    color: #fff;
    font-size: 0.7rem;
    opacity: 0.85;
  }
  .pf-menubar-range-wrap {
    position: relative;
    flex: 1;
    height: clamp(14px, 2cqw, 20px);
    display: flex;
    align-items: center;
  }
  .pf-menubar-range-highlight {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    left: 0;
    right: 100%;
    height: 0.3rem;
    background: rgba(0,0,0,.6);
    border-radius: 4px;
    pointer-events: none;
    box-shadow: 0 0 0 1px rgba(255,255,255,.15);
  }
  .pf-menubar-range-wrap input[type=range] {
    position: absolute;
    left: 0;
    right: 0;
    width: 100%;
    background: transparent;
    height: clamp(14px, 2cqw, 20px);
    pointer-events: none;
    -webkit-appearance: none;
    appearance: none;
  }
  .pf-menubar-range-wrap input[type=range]::-webkit-slider-thumb,
  .pf-menubar-range-wrap input[type=range]::-moz-range-thumb {
    pointer-events: auto;
    width: clamp(12px, 2cqw, 14px);
    height: clamp(12px, 2cqw, 14px);
    border-radius: 50%;
    background: #fff;
    border: 2px solid rgba(255,255,255,.4);
    box-shadow: 0 0 0 2px rgba(0,0,0,.15);
  }
  
  /* =======================
     MORE / LESS TOGGLER
     ======================= */
  .pf-menubar-more-content {
    display: block;     /* content grows naturally */
    overflow: visible;
    flex-shrink: 0;
  }
  /* Advanced section (below More/Less): stack panels with same spacing as above */
  .pf-menubar-advanced {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
  }
  
  /* =======================
     OPEN / CLOSE BUTTONS
     ======================= */
  .pf-menubar-open,
  .pf-menubar-close {
    border-radius: 9999px;
    border: 1px solid rgba(255,255,255,.35);
    color: #fff;
    backdrop-filter: blur(6px);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    transition: transform .15s ease, box-shadow .15s ease;
  }
  .pf-menubar-open {
    width: 1.8rem;
    height: 1.8rem;
    background: linear-gradient(135deg, rgba(255,149,0,.9), rgba(255,64,129,.9));
    box-shadow: 0 6px 14px rgba(0,0,0,.28);
  }
  .pf-menubar-close {
    position: absolute;
    top: 6px;
    right: 6px;
    width: 22px;
    height: 22px;
    background: rgba(255,255,255,.18);
    box-shadow: 0 5px 10px rgba(0,0,0,.25);
  }
  .pf-menubar-open:hover,
  .pf-menubar-close:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 18px rgba(0,0,0,.32);
  }
  
  /* =======================
     LEGEND HOSTS
     ======================= */
  .pf-menubar-legend-host { margin-top: 0.6rem; }
  
  /* =======================
     RESPONSIVE
     ======================= */
  /* Removed to respect 2/3rds rule */
  /* @media (max-width: 360px) {
    .pf-menubar-sidebar { width: 92vw; }
  } */
  